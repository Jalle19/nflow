<h2>Workflow {{definition.type}}</h2>

<a href="#/workflow-definition/{{workflow.type}}">Go to workflow definition</a></li>
<blockquote ng-show="definition.description">{{definition.description}}</blockquote>
<p>
    Current state: <strong ng-click="selectAction(workflow.state)">{{workflow.state}}</strong>
    <span ng-show="workflow.stateText">({{workflow.stateText}})</span>
    since <strong>{{currentStateSince()}}</strong>
    <div>
        Next activation: <strong>{{nextActivation()}}</strong>
    </div>
</p>

<svg id="workflowSvg" width="650" height="680"/>

<h2 ng-show="workflow.stateVariables">State variables</h2>
<table ng-show="workflow.stateVariables" class="table table-striped table-hover">
    <thead>
        <tr><th>Variable</th><th>Value</th></tr>
    </thead>
    <tbody>
        <tr ng-repeat="(key, value) in workflow.stateVariables">
            <td><pre>{{key}}</pre></td>
            <td><pre>{{prettyPrintJson(value)}}</pre></td>
        </tr>
    </tbody>
</table>

<h2>Action history</h2>

<table id="action-history" class="table table-striped table-hover">
   <thead>
       <th>No</th>
       <th>State</th>
       <th>Description</th>
       <th>Retries</th>
       <th>Started</th>
       <th>Finished</th>
       <th>Duration</th>
    </thead>

    <tbody>
        <tr ng-repeat="action in workflow.actions | reverse" >
            <td>{{workflow.actions.length - $index}}</td>
            <td ng-click="selectAction(action)">{{action.state}}</td>
            <td class="{{getClass(action)}}" ng-click="selectAction(action)">{{action.stateText}}</td>
            <td>{{action.retryNo}}</td>
            <td>{{action.executionStartTime}}</td>
            <td>{{action.executionEndTime}}</td>
            <td>{{duration(action)}}</td>
        </tr>
    </tbody>
</ul>


